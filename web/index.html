
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>goconvert web</title>
</head>
<body>
	<h1>Viewing index</h1>

	<div>Testing page, port {{.WebPort |html}}</div>

	<h1>Image conversion and upload tool</h1>
	<section id="imagefolder">
		<label for="folder">Image folder</label> <input id="folder"
			name="folder" type="text" value="." />
	</section>
	<section id="collectionname">
		<label for="collection">Collection name</label> <input id="collection"
			name="collection" type="text" value="" />
		<p>
			<input type="button" id="compress" value="compress images" />
		</p>
	</section>

	<!-- 
<script src="http://www.google.com/jsapi"></script>
<script>google.load("jquery", "1.3")</script>
<script src="http://jquery-json.googlecode.com/files/jquery.json-2.2.min.js"></script>
<script src="http://jquery-websocket.googlecode.com/files/jquery.websocket-0.0.1.js"></script>
 -->
	<script type="text/javascript" src="scripts/jquery-1.7.js"></script>
	<script>
		/*
		 var ws = $.websocket("ws://127.0.0.1:{{.WebPort |html}}/echo", {
		 events: {
		 message: function(e) { $('#content').append(e.data + '<br>') }
		 }
		 });
		 */
		var data = {folder: $("#folder").val(), collection: $("#collection").val()};
		$('#compress').click(function() {
			$.ajax("/compress", {
				data: data,
				type: "POST",
				dataType: "json",
				success: function(data) {
					if (!data) {
						return;
					}
					if (data.compile_errors != "") {
						setOutput(data.compile_errors, true);
						highlightErrors(data.compile_errors);
						return;
					}
					alert(data.output);
				},
				error: function() {
					alert('error');
				}
			});
		});
	</script>
</body>
</html>

